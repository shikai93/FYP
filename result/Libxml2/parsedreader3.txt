section: xmlReader synopsis: Show how to extract subdocuments with xmlReader purpose: Demonstrate the use of xmlTextReaderPreservePattern() to parse an XML file with the xmlReader while collecting only some subparts of the document. (Note that the XMLReader functions require libxml2 version later than 2.6.) usage: reader3 test: reader3 > reader3.tmp ; diff reader3.tmp reader3.res ; rm reader3.tmp author: Daniel Veillard copy: see Copyright for the status of this software.

streamFile: @filename: the file name to parse Parse and print information about an XML file. Returns the resulting doc with just the elements preserved.

build an xmlReader for that file

add the pattern to preserve

Parse and traverse the tree, collecting the nodes in the process

get the resulting nodes

Free up the reader

this initialize the library and check potential ABI mismatches between the version it was compiled for and the actual shared library used.

ouptut the result.

don't forget to free up the doc

Cleanup function for the XML library.

this is to debug memory for regression tests

%s : failed add preserve pattern %s\n

%s : failed to parse\n

Unable to open %s\n

test3.xml

preserved

Reader, Pattern or output support not compiled in\n

