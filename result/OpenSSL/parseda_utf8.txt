Copyright 1995-2016 The OpenSSL Project Authors. All Rights Reserved. Licensed under the OpenSSL license (the "License"). You may not use this file except in compliance with the License. You can obtain a copy in the file LICENSE in the source distribution or at https://www.openssl.org/source/license.html

UTF8 utilities

This parses a UTF8 string one character at a time. It is passed a pointer to the string and the length of the string. It sets 'value' to the value of the current character. It returns the number of characters read or a negative error code: -1 = string too short -2 = illegal character -3 = subsequent characters not of the form 10xxxxxx -4 = character encoded incorrectly (not minimal length).

Check syntax and work out the encoded value (if correct)

This takes a character 'value' and writes the UTF8 encoded value in 'str' where 'str' is a buffer containing 'len' characters. Returns the number of characters written or -1 if 'len' is too small. 'str' can be set to NULL in which case it just returns the number of characters. It will need at most 6 characters.

Maximum we will need

www.openssl.org/source/license.html

License

internal/cryptlib.h

value

value

str

str

len

len

str

0xxxxxx

0x80)

0x7f;

0xe0)

0xc0)

0xc0)

0x80)

0x1f)

0x3f;

0x80)

0xf0)

0xe0)

0xc0)

0x80)

0xc0)

0x80))

0xf)

0x3f)

0x3f;

0x800)

0xf8)

0xf0)

0xc0)

0x80)

0xc0)

0x80)

0xc0)

0x80))

0x7))

0x3f)

0x3f)

0x3f;

0x10000)

0xfc)

0xf8)

0xc0)

0x80)

0xc0)

0x80)

0xc0)

0x80)

0xc0)

0x80))

0x3))

0x3f))

0x3f))

0x3f)

0x3f;

0x200000)

0xfe)

0xfc)

0xc0)

0x80)

0xc0)

0x80)

0xc0)

0x80)

0xc0)

0x80)

0xc0)

0x80))

0x1))

0x3f))

0x3f))

0x3f))

0x3f)

0x3f;

0x4000000)

0x80)

0x800)

0x1f)

0xc0);

0x3f)

0x80);

0x10000)

0xf)

0xe0);

0x3f)

0x80);

0x3f)

0x80);

0x200000)

0x7)

0xf0);

0x3f)

0x80);

0x3f)

0x80);

0x3f)

0x80);

0x4000000)

0x3)

0xf8);

0x3f)

0x80);

0x3f)

0x80);

0x3f)

0x80);

0x3f)

0x80);

0x1)

0xfc);

0x3f)

0x80);

0x3f)

0x80);

0x3f)

0x80);

0x3f)

0x80);

0x3f)

0x80);

