Copyright 2005-2016 The OpenSSL Project Authors. All Rights Reserved. Licensed under the OpenSSL license (the "License"). You may not use this file except in compliance with the License. You can obtain a copy in the file LICENSE in the source distribution or at https://www.openssl.org/source/license.html

BEGIN BIO_ADDRINFO/BIO_ADDR stuff.

Throughout this file and b_addr.c, the existence of the macro AI_PASSIVE is used to detect the availability of struct addrinfo, getnameinfo() and getaddrinfo(). If that macro doesn't exist, we use our own implementation instead.

It's imperative that these macros get defined before openssl/bio.h gets included. Otherwise, the AI_PASSIVE hack will not work properly. For clarity, we check for internal/cryptlib.h since it's a common header that also includes bio.h.

Undefine AF_UNIX on systems that define it but don't support it.

There's a bug in VMS C header file netdb.h, where struct addrinfo always is the P32 variant, but the functions that handle that structure, such as getaddrinfo() and freeaddrinfo() adapt to the initial pointer size. The easiest workaround is to force struct addrinfo to be the 64-bit variant when compiling in P64 mode.

END BIO_ADDRINFO/BIO_ADDR stuff.

Buffers are setup like this: <---------------------- size -----------------------> +---------------------------------------------------+ | consumed | remaining | free space | +---------------------------------------------------+ <-- off --><------- len ------->

BIO bio;

this is now in the BIO struct

how big is the input buffer

how big is the output buffer

the char array

how many bytes are in it

write/read offset

the char array

how many bytes are in it

write/read offset

bio, mode, argp, argi, argl, ret

first argument for the callback

extra storage

used by filter BIOs

used by filter BIOs

Shortcut UPLINK calls on most platforms...

www.openssl.org/source/license.html

*

License

e_os.h

internal/sockets.h

internal/refcount.h

t exist, * we use our own implementation instead. */ /* * It

s a common header * that also includes bio.h. */ # ifdef HEADER_CRYPTLIB_H # error internal/cryptlib.h included before bio_lcl.h # endif # ifdef HEADER_BIO_H # error openssl/bio.h included before bio_lcl.h # endif /* * Undefine AF_UNIX on systems that define it but don

internal/cryptlib.h

internal/bio.h

