Copyright 2015-2016 The OpenSSL Project Authors. All Rights Reserved. Licensed under the OpenSSL license (the "License"). You may not use this file except in compliance with the License. You can obtain a copy in the file LICENSE in the source distribution or at https://www.openssl.org/source/license.html

ChaCha20_ctr32 encrypts |len| bytes from |inp| with the given key and nonce and writes the result to |out|, which may be equal to |inp|. The |key| is not 32 bytes of verbatim key material though, but the said material collected into 8 32-bit elements array in host byte order. Same approach applies to nonce: the |counter| argument is pointer to concatenated nonce and counter values collected into 4 32-bit elements. This, passing crypto material collected into 32-bit elements as opposite to passing verbatim byte vectors, is chosen for efficiency in multi-call scenarios.

You can notice that there is no key setup procedure. Because it's as trivial as collecting bytes into 32-bit elements, it's reckoned that below macro is sufficient.

www.openssl.org/source/license.html

License

C

s * as trivial as collecting bytes into 32-bit elements, it

