Copyright 2007-2016 The OpenSSL Project Authors. All Rights Reserved. Licensed under the OpenSSL license (the "License"). You may not use this file except in compliance with the License. You can obtain a copy in the file LICENSE in the source distribution or at https://www.openssl.org/source/license.html

Simple S/MIME encrypt example

On OpenSSL 0.9.9 only: for streaming set PKCS7_STREAM

Read in recipient certificate

Create recipient STACK and add recipient cert to it

sk_X509_pop_free will free up recipient STACK and its contents so set rcert to NULL so it isn't freed up twice.

Open content being encrypted

encrypt content

Write out S/MIME message

www.openssl.org/source/license.html

License

signer.pem

r

encr.txt

r

smencr.txt

w

Error Encrypting Data\n

