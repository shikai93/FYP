Copyright 2017 The OpenSSL Project Authors. All Rights Reserved. Licensed under the OpenSSL license (the "License"). You may not use this file except in compliance with the License. You can obtain a copy in the file LICENSE in the source distribution or at https://www.openssl.org/source/license.html

Output a failed test first line. All items are optional are generally not preinted if passed as NULL. The special cases are for prefix where "ERROR" is assumed and for left and right where a non-failure message is produced if either is NULL.

A common routine to output test failure messages. Generally this should not be called directly, rather it should be called by the following functions. |desc| is a printf formatted description with arguments |args| that is supplied by the user and |desc| can be NULL. |type| is the data type that was tested (int, char, ptr, ...). |fmt| is a system provided printf format with following arguments that spell out the failure details i.e. the actual values compared and the operator used. The typical use for this is from an utility test function: int test6(const char file, int line, int n) { if (n != 6) { test_fail_message(1, file, line, "int", "value %d is not %d", n, 6); return 0; } return 1; } calling test6(3, "oops") will return 0 and produce out along the lines of: FAIL oops: (int) value 3 is not 6\n

Using openssl_strerror_r causes linking issues since it isn't exported from libcrypto.so

Define some comparisons between pairs of various types. These functions return 1 if the test is true. Otherwise, they return 0 and pretty-print diagnostics. In each case the functions produced are: int test_name_eq(const type t1, const type t2, const char desc, ...); int test_name_ne(const type t1, const type t2, const char desc, ...); int test_name_lt(const type t1, const type t2, const char desc, ...); int test_name_le(const type t1, const type t2, const char desc, ...); int test_name_gt(const type t1, const type t2, const char desc, ...); int test_name_ge(const type t1, const type t2, const char desc, ...); The t1 and t2 arguments are to be compared for equality, inequality, less than, less than or equal to, greater than and greater than or equal to respectively. If the specified condition holds, the functions return 1. If the condition does not hold, the functions print a diagnostic message and return 0. The desc argument is a printf format string followed by its arguments and this is included in the output if the condition being tested for is false.

www.openssl.org/source/license.html

License

../testutil.h

output.h

tu_local.h

internal/nelem.h

ERROR

%s:

ERROR

(%s)

'%s %s %s' failed

'%s'

@ %s:%d

\n

int

value %d is not %d

oops

\n

INFO

INFO

\n

\n

%s: %s

\n

[

] compared to [

]

%d

%u

%c

%u

%ld

%lu

%zu

%p

%p

ptr

NULL

==

%p

ptr

NULL

!=

%p

bool

true

==

false

bool

false

==

true

string

==

string

!=

string

==

string

!=

memory

==

memory

!=

BIGNUM

BIGNUM

0

BIGNUM

1

==

BIGNUM

ODD(

)

BIGNUM

EVEN(

)

BIGNUM

==

BIGNUM

abs==

